* TODO use buf in datagram
